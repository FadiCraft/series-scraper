name: ğŸ“º Ø§Ø³ØªØ®Ø±Ø§Ø¬ Ø§Ù„Ù…Ø³Ù„Ø³Ù„Ø§Øª

on:
  workflow_dispatch:

jobs:
  scrape:
    runs-on: ubuntu-latest
    
    steps:
      - name: ğŸ“¥ ØªÙ†Ø²ÙŠÙ„ Ø§Ù„ÙƒÙˆØ¯
        uses: actions/checkout@v3
        
      - name: âš™ï¸ Ø¥Ø¹Ø¯Ø§Ø¯ Node.js
        uses: actions/setup-node@v3
        with:
          node-version: '18'
          cache: 'npm'  # Ù‡Ø°Ø§ Ù…Ù‡Ù… Ù„Ù„ØªØ³Ø±ÙŠØ¹
          
      - name: ğŸ“¦ ØªØ«Ø¨ÙŠØª Ø§Ù„Ø­Ø²Ù… Ø¨Ù€ npm ci
        run: |
          echo "ğŸ” Ø¹Ø±Ø¶ Ø§Ù„Ù…Ù„ÙØ§Øª Ø§Ù„Ù…ÙˆØ¬ÙˆØ¯Ø©..."
          ls -la
          
          echo "ğŸ“¦ ØªØ«Ø¨ÙŠØª Ø§Ù„Ø­Ø²Ù… Ø¨Ø§Ø³ØªØ®Ø¯Ø§Ù… npm ci..."
          npm ci  # Ø§Ø³ØªØ®Ø¯Ù… ci Ø¨Ø¯Ù„ install
          
          echo "âœ… Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù„ØªØ«Ø¨ÙŠØª..."
          ls node_modules/ | grep -E "(axios|cheerio)"
          
      - name: ğŸš€ ØªØ´ØºÙŠÙ„ Ø§Ù„Ø¨Ø±Ù†Ø§Ù…Ø¬
        run: |
          echo "â–¶ï¸ ØªØ´ØºÙŠÙ„ fetch.js..."
          node fetch.js
          
      - name: ğŸ“Š Ø¹Ø±Ø¶ Ø§Ù„Ù†ØªØ§Ø¦Ø¬
        run: |
          echo "ğŸ“ Ø§Ù„Ù…Ù„ÙØ§Øª Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠØ©:"
          ls -la *.json *.csv 2>/dev/null || echo "Ù„Ø§ ØªÙˆØ¬Ø¯ Ù…Ù„ÙØ§Øª Ù†ØªØ§Ø¦Ø¬"
          
          if [ -f "test.json" ]; then
            echo "ğŸ“„ Ù…Ø­ØªÙˆÙ‰ test.json:"
            cat test.json
          fi
