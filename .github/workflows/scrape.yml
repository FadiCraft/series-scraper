name: ğŸ“º Ø§Ø³ØªØ®Ø±Ø§Ø¬ Ø§Ù„Ù…Ø³Ù„Ø³Ù„Ø§Øª Ø§Ù„ÙŠÙˆÙ…ÙŠ

on:
  schedule:
    - cron: "0 4 * * *"  # Ø§Ù„Ø³Ø§Ø¹Ø© 7 ØµØ¨Ø§Ø­Ø§Ù‹ Ø¨ØªÙˆÙ‚ÙŠØª Ø¥Ø³Ø·Ù†Ø¨ÙˆÙ„
  workflow_dispatch:      # ØªØ´ØºÙŠÙ„ ÙŠØ¯ÙˆÙŠ

jobs:
  scrape-series:
    runs-on: ubuntu-latest
    timeout-minutes: 45  # ÙˆÙ‚Øª Ø£Ø·ÙˆÙ„ Ù„Ø£Ù† Ø§Ù„Ù…Ø³Ù„Ø³Ù„Ø§Øª ØªØ­ØªØ§Ø¬ ÙˆÙ‚Øª Ø£ÙƒØ«Ø±
    
    steps:
      - name: ğŸ“¥ ØªÙ†Ø²ÙŠÙ„ Ø§Ù„ÙƒÙˆØ¯
        uses: actions/checkout@v3
        
      - name: âš™ï¸ Ø¥Ø¹Ø¯Ø§Ø¯ Node.js
        uses: actions/setup-node@v3
        with:
          node-version: '18'
          cache: 'npm'
          
      - name: ğŸ§¹ ØªÙ†Ø¸ÙŠÙ Ø§Ù„ÙƒØ§Ø´
        run: npm cache clean --force
          
      - name: ğŸ“¦ ØªØ«Ø¨ÙŠØª Ø§Ù„Ø­Ø²Ù…
        run: npm ci
        
      - name: ğŸš€ ØªØ´ØºÙŠÙ„ Ø§Ù„Ù…Ø³ØªØ®Ø±Ø¬
        run: node fetch.js
        
      - name: ğŸ“Š Ø¹Ø±Ø¶ Ø§Ù„Ù†ØªØ§Ø¦Ø¬
        run: |
          echo "ğŸ“ˆ Ø§Ù„Ù†ØªØ§Ø¦Ø¬ Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠØ©:"
          if [ -f "report.json" ]; then
            cat report.json
          fi
          
      - name: ğŸ“¤ Ø±ÙØ¹ Ø§Ù„ØªØºÙŠÙŠØ±Ø§Øª
        run: |
          git config user.name "GitHub Actions Bot"
          git config user.email "actions@github.com"
          git add -A
          git commit -m "ğŸ“º ØªØ­Ø¯ÙŠØ« Ù…Ø³Ù„Ø³Ù„Ø§Øª - $(date +'%Y-%m-%d %H:%M')" || echo "Ù„Ø§ ØªÙˆØ¬Ø¯ ØªØºÙŠÙŠØ±Ø§Øª"
          git push
